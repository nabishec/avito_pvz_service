# üõí AVITO PVZ SERVICE

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É–Ω–∫—Ç–∞–º–∏ –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤ (–ü–í–ó). –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É–Ω–∫—Ç–∞–º–∏ –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤.
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏–µ–º–∫–µ —Ç–æ–≤–∞—Ä–æ–≤.
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –ø—Ä–∏–µ–º–∫–∏: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ (–¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–µ–º–∫–∏).
- –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–µ–º–∫–∏.
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤ –∏ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–∏—Ö.

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- Go 1.24 –∏–ª–∏ –≤—ã—à–µ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### –ß–µ—Ä–µ–∑ Docker Compose

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/nabishec/avito_pvz_service.git
cd avito_pvz_service
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
docker-compose up -d
```

3. –°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8080
4. Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8080/swagger/

## ‚ùó–†–µ—à–µ–Ω–∏—è
* –í –∑–∞–¥–∞–Ω–∏–∏ –±—ã–ª–∞ –æ—à–∏–±–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –≤—ã—Ä–∞–∂–∞–ª–∞—Å—å –≤ —Ç–æ–º, —á—Ç–æ –≤ openapi –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –±—ã–ª employee, –∞ –≤  –∑–∞–¥–∞–Ω–∏–∏ client. –ü–æ—ç—Ç–æ–º—É –±—ã–ª–æ –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –≤–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å client.

* –í –∑–∞–¥–∞–Ω–∏–∏ –±—ã–ª–æ —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ prometheus –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –ø–æ—Ä—Ç—É 9000, endpoint'—É /metrics. –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–µ—Ç —Å–≤–æ–∏ –º–µ—Ç—Ä–∏–∫–∏ prometheus –ø–æ –ø–æ—Ä—Ç—É 9090 –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ . –ê prometheus  –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç –µ–ª—é –ø–æ –ø–æ—Ä—Ç—É 9000. –ò –∫ –º–µ—Ç—Ä–∏–∫–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ —Å –Ω–∞—Ä—É–∂–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

* –¢–∞–∫–∂–µ –≤ —Ñ–∞–π–ª–µ .proto –±—ã–ª–æ enum, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –º–æ–¥–µ–ª–∏ –ü–í–ó, –∏ –º–æ–¥–µ–ª–∏ –æ—Ç–≤–µ—Ç–∞ grpc —Å–µ—Ä–≤–∏—Å–∞. –ü–æ—ç—Ç–æ–º—É —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ enum –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–æ—Å—å, –∏  –ø–æ –ø–æ—Ä—Ç—É 3000 –¥–æ—Å—Ç—É–ø–µ–Ω grpc —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–≤–∑, –±–µ–∑ –ø–æ–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–æ–∫. 


## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í —Ä—É—á–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫:
- **400 Bad Request** - –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- **401 Unauthorized** - –ø—Ä–æ–±–ª–µ–º–∞ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- **403 Forbidden** - –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω (–∫–æ–≥–¥–∞ —Ä–æ–ª—å –Ω–µ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä –∏ –Ω–µ –∫–ª–∏–µ–Ω—Ç)
- **500 Internal Server Error** - –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –≤ API: dateonly (YYYY-MM-DD)

## üìä –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

- **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã —Å —Ä–æ–ª—è–º–∏ (client, moderator)
- **pvzs** - –ø—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤
- **receptions** - –ø—Ä–∏–µ–º–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ü–í–ó
- **products** - —Ç–æ–≤–∞—Ä—ã, –≤—Ö–æ–¥—è—â–∏–µ –≤ –ø—Ä–∏–µ–º–∫—É

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ë—ã–ª —Å–æ–∑–¥–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π [—Ç–µ—Å—Ç](integration_test/api_test.go)
```bash
go test ./integration_test/... 
```
–ê —Ç–∞–∫–∂–µ —é–Ω–∏—Ç [—Ç–µ—Å—Ç—ã](internal/http_server/handlers) –¥–ª—è –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∏.

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏:
```bash
go test ./internal/http_server/handlers/... -coverprofile cover.out 

go tool cover -func cover.out
```

![–ü–æ–∫—Ä—ã—Ç–∏–µ –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∏ —é–Ω–∏—Ç —Ç–µ—Å—Ç–∞–º–∏](image.png)
(–Ω–∞ —Å–Ω–∏–º–∫–µ –ø–æ–∫–∞–∑–∞–Ω –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–∫—Ä—ã—Ç–∏—è –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∏ —é–Ω–∏—Ç —Ç–µ—Å—Ç–∞–º–∏)

## üíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è**: Go 1.24
- **Web-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫**: Chi
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: Goose
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: go-playground/validator
- **–õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: zerolog
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**: Swagger
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker, Docker Compose

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

[Apache License 2.0](LICENSE)
